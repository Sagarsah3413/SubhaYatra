import{r as Ie,g as ve,i as Re,a as be,c as te,E as xe,b as Ce,p as De,N as ke,A as Te,d as _e,e as Ue,S as We,D as $e,f as Fe,h as Oe,j as He,k as Le,l as Me,m as je,n as Ne,o as Ge,q as ze,s as Ke,t as qe,C as Be,u as Ve,v as Qe,w as Je,x as Ze,L as Xe,y as Ye,z as et,B as tt,F as st,G as ot,H as nt,I as it,J as rt,M as at,K as ct,O as ut,T as w,P as dt,Q as lt,a4 as N}from"./index-EChXCoxk.js";import{n as se,t as pt,f as gt,s as ft,F as mt,g as ht,r as St}from"./ChatPage-Cl_fa1cT.js";import{A as Et}from"./AwsQueryProtocol-BuFIkzmN.js";import"./index-DQRB4LQk.js";import"./toUtf8.browser-CyauOOnS.js";function Pt(){return async()=>"us-east-1"}const wt=async(e,t,o)=>({operation:ve(t).operation,region:await se(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function At(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,o)=>({signingProperties:{config:t,context:o}})}}function yt(e){return{schemeId:"smithy.api#noAuth"}}const It=e=>{const t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(yt());break}default:t.push(At(e))}return t},vt=e=>Object.assign(e,{stsClientCtor:me}),Rt=e=>{const t=vt(e),o=Ie(t);return Object.assign(o,{authSchemePreference:se(e.authSchemePreference??[])})},bt=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),xt={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Ct="3.985.0",Dt={version:Ct},kt=e=>new TextEncoder().encode(e),Tt=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)},oe=(e,t=!1)=>{if(t){for(const o of e.split("."))if(!oe(o))return!1;return!0}return!(!Re(e)||e.length<3||e.length>63||e!==e.toLowerCase()||be(e))},G=":",_t="/",Ut=e=>{const t=e.split(G);if(t.length<6)return null;const[o,a,n,g,f,...h]=t;if(o!=="arn"||a===""||n===""||h.join(G)==="")return null;const C=h.map(D=>D.split(_t)).flat();return{partition:a,service:n,region:g,accountId:f,resourceId:C}},Wt=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],$t={partitions:Wt};let Ft=$t;const Ot=e=>{const{partitions:t}=Ft;for(const a of t){const{regions:n,outputs:g}=a;for(const[f,h]of Object.entries(n))if(f===e)return{...g,...h}}for(const a of t){const{regionRegex:n,outputs:g}=a;if(new RegExp(n).test(e))return{...g}}const o=t.find(a=>a.id==="aws");if(!o)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...o.outputs}},ne={isVirtualHostableS3Bucket:oe,parseArn:Ut,partition:Ot};te.aws=ne;const ie="required",s="type",i="fn",r="argv",A="ref",z=!1,_=!0,P="booleanEquals",d="stringEquals",re="sigv4",ae="sts",ce="us-east-1",c="endpoint",K="https://sts.{Region}.{PartitionResult#dnsSuffix}",S="tree",x="error",W="getAttr",q={[ie]:!1,[s]:"string"},U={[ie]:!0,default:!1,[s]:"boolean"},ue={[A]:"Endpoint"},B={[i]:"isSet",[r]:[{[A]:"Region"}]},l={[A]:"Region"},V={[i]:"aws.partition",[r]:[l],assign:"PartitionResult"},de={[A]:"UseFIPS"},le={[A]:"UseDualStack"},p={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:re,signingName:ae,signingRegion:ce}]},headers:{}},m={},Q={conditions:[{[i]:d,[r]:[l,"aws-global"]}],[c]:p,[s]:c},pe={[i]:P,[r]:[de,!0]},ge={[i]:P,[r]:[le,!0]},J={[i]:W,[r]:[{[A]:"PartitionResult"},"supportsFIPS"]},fe={[A]:"PartitionResult"},Z={[i]:P,[r]:[!0,{[i]:W,[r]:[fe,"supportsDualStack"]}]},X=[{[i]:"isSet",[r]:[ue]}],Y=[pe],ee=[ge],Ht={parameters:{Region:q,UseDualStack:U,UseFIPS:U,Endpoint:q,UseGlobalEndpoint:U},rules:[{conditions:[{[i]:P,[r]:[{[A]:"UseGlobalEndpoint"},_]},{[i]:"not",[r]:X},B,V,{[i]:P,[r]:[de,z]},{[i]:P,[r]:[le,z]}],rules:[{conditions:[{[i]:d,[r]:[l,"ap-northeast-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"ap-south-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"ap-southeast-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"ap-southeast-2"]}],endpoint:p,[s]:c},Q,{conditions:[{[i]:d,[r]:[l,"ca-central-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"eu-central-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"eu-north-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"eu-west-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"eu-west-2"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"eu-west-3"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"sa-east-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,ce]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"us-east-2"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"us-west-1"]}],endpoint:p,[s]:c},{conditions:[{[i]:d,[r]:[l,"us-west-2"]}],endpoint:p,[s]:c},{endpoint:{url:K,properties:{authSchemes:[{name:re,signingName:ae,signingRegion:"{Region}"}]},headers:m},[s]:c}],[s]:S},{conditions:X,rules:[{conditions:Y,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[s]:x},{conditions:ee,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[s]:x},{endpoint:{url:ue,properties:m,headers:m},[s]:c}],[s]:S},{conditions:[B],rules:[{conditions:[V],rules:[{conditions:[pe,ge],rules:[{conditions:[{[i]:P,[r]:[_,J]},Z],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:m,headers:m},[s]:c}],[s]:S},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[s]:x}],[s]:S},{conditions:Y,rules:[{conditions:[{[i]:P,[r]:[J,_]}],rules:[{conditions:[{[i]:d,[r]:[{[i]:W,[r]:[fe,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:m,headers:m},[s]:c},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:m,headers:m},[s]:c}],[s]:S},{error:"FIPS is enabled but this partition does not support FIPS",[s]:x}],[s]:S},{conditions:ee,rules:[{conditions:[Z],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:m,headers:m},[s]:c}],[s]:S},{error:"DualStack is enabled but this partition does not support DualStack",[s]:x}],[s]:S},Q,{endpoint:{url:K,properties:m,headers:m},[s]:c}],[s]:S}],[s]:S},{error:"Invalid Configuration: Missing Region",[s]:x}]},Lt=Ht,Mt=new xe({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),jt=(e,t={})=>Mt.get(e,()=>Ce(Lt,{endpointParams:e,logger:t.logger}));te.aws=ne;const Nt=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??gt,base64Encoder:e?.base64Encoder??pt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??jt,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??It,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Te},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new _e}],logger:e?.logger??new ke,protocol:e?.protocol??Et,protocolSettings:e?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??De,utf8Decoder:e?.utf8Decoder??kt,utf8Encoder:e?.utf8Encoder??Tt}),Gt=e=>{const t=Ue(e),o=()=>t().then(Ne),a=Nt(e);return{...a,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Le,credentialDefaultProvider:e?.credentialDefaultProvider??(n=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??He({serviceId:a.serviceId,clientVersion:Dt.version}),maxAttempts:e?.maxAttempts??Oe,region:e?.region??Fe("Region is missing"),requestHandler:mt.create(e?.requestHandler??o),retryMode:e?.retryMode??(async()=>(await o()).retryMode||$e),sha256:e?.sha256??We,streamCollector:e?.streamCollector??ft,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(je)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(Me))}},zt=e=>{const t=e.httpAuthSchemes;let o=e.httpAuthSchemeProvider,a=e.credentials;return{setHttpAuthScheme(n){const g=t.findIndex(f=>f.schemeId===n.schemeId);g===-1?t.push(n):t.splice(g,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){o=n},httpAuthSchemeProvider(){return o},setCredentials(n){a=n},credentials(){return a}}},Kt=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),qt=(e,t)=>{const o=Object.assign(Ge(e),ze(e),ht(e),zt(e));return t.forEach(a=>a.configure(o)),Object.assign(e,Ke(o),qe(o),St(o),Kt(o))};class me extends Be{config;constructor(...[t]){const o=Gt(t||{});super(o),this.initConfig=o;const a=bt(o),n=Ve(a),g=Qe(n),f=Je(g),h=Xe(f),C=Ze(h),D=Rt(C),T=qt(D,t?.extensions||[]);this.config=T,this.middlewareStack.use(Ye(this.config)),this.middlewareStack.use(et(this.config)),this.middlewareStack.use(tt(this.config)),this.middlewareStack.use(st(this.config)),this.middlewareStack.use(ot(this.config)),this.middlewareStack.use(nt(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(rt(this.config,{httpAuthSchemeParametersProvider:wt,identityProviderConfigProvider:async k=>new at({"aws.auth#sigv4":k.credentials})})),this.middlewareStack.use(ct(this.config))}destroy(){super.destroy()}}class E extends ut{constructor(t){super(t),Object.setPrototypeOf(this,E.prototype)}}class $ extends E{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,$.prototype)}}class F extends E{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,F.prototype)}}class O extends E{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,O.prototype)}}class H extends E{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,H.prototype)}}class L extends E{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,L.prototype)}}class M extends E{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,M.prototype)}}class j extends E{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,j.prototype)}}const Bt="Arn",Vt="AccessKeyId",Qt="AssumedRoleId",he="AssumedRoleUser",Jt="AssumeRoleWithWebIdentity",Zt="AssumeRoleWithWebIdentityRequest",Xt="AssumeRoleWithWebIdentityResponse",Yt="Audience",Se="Credentials",es="DurationSeconds",ts="Expiration",ss="ExpiredTokenException",os="IDPCommunicationErrorException",ns="IDPRejectedClaimException",is="InvalidIdentityTokenException",rs="MalformedPolicyDocumentException",as="Policy",cs="PolicyArns",us="PolicyDescriptorType",ds="ProviderId",ls="PackedPolicySize",ps="PackedPolicyTooLargeException",gs="Provider",fs="RoleArn",ms="RegionDisabledException",hs="RoleSessionName",Ss="SecretAccessKey",Es="SubjectFromWebIdentityToken",Ps="SourceIdentity",ws="SessionToken",As="WebIdentityToken",ys="arn",Is="accessKeySecretType",y="awsQueryError",I="client",vs="clientTokenType",v="error",R="httpError",b="message",Rs="policyDescriptorListType",Ee="smithy.ts.sdk.synthetic.com.amazonaws.sts",u="com.amazonaws.sts";var bs=[0,u,Is,8,0],xs=[0,u,vs,8,0],Cs=[3,u,he,0,[Qt,Bt],[0,0],2],Ds=[3,u,Zt,0,[fs,hs,As,ds,cs,as,es],[0,0,[()=>xs,0],0,()=>js,0,1],3],ks=[3,u,Xt,0,[Se,Es,he,ls,gs,Yt,Ps],[[()=>Ts,0],0,()=>Cs,1,0,0,0]],Ts=[3,u,Se,0,[Vt,Ss,ws,ts],[0,[()=>bs,0],0,4],4],_s=[-3,u,ss,{[y]:["ExpiredTokenException",400],[v]:I,[R]:400},[b],[0]];w.for(u).registerError(_s,$);var Us=[-3,u,os,{[y]:["IDPCommunicationError",400],[v]:I,[R]:400},[b],[0]];w.for(u).registerError(Us,j);var Ws=[-3,u,ns,{[y]:["IDPRejectedClaim",403],[v]:I,[R]:403},[b],[0]];w.for(u).registerError(Ws,L);var $s=[-3,u,is,{[y]:["InvalidIdentityToken",400],[v]:I,[R]:400},[b],[0]];w.for(u).registerError($s,M);var Fs=[-3,u,rs,{[y]:["MalformedPolicyDocument",400],[v]:I,[R]:400},[b],[0]];w.for(u).registerError(Fs,F);var Os=[-3,u,ps,{[y]:["PackedPolicyTooLarge",400],[v]:I,[R]:400},[b],[0]];w.for(u).registerError(Os,O);var Hs=[3,u,us,0,[ys],[0]],Ls=[-3,u,ms,{[y]:["RegionDisabledException",403],[v]:I,[R]:403},[b],[0]];w.for(u).registerError(Ls,H);var Ms=[-3,Ee,"STSServiceException",0,[],[]];w.for(Ee).registerError(Ms,E);var js=[1,u,Rs,0,()=>Hs],Ns=[9,u,Jt,0,()=>Ds,()=>ks];class Gs extends dt.classBuilder().ep(xt).m(function(t,o,a,n){return[lt(a,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(Ns).build(){}const zs=e=>{if(typeof e?.Arn=="string"){const t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},Ks=async(e,t,o,a={})=>{const n=typeof e=="function"?await e():e,g=typeof t=="function"?await t():t;let f="";const h=n??g??(f=await Pt()());return o?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${g} (contextual client)`,`${f} (STS default: AWS_REGION, profile region, or us-east-1)`),h},qs=(e,t)=>{let o;return async a=>{if(!o){const{logger:C=e?.parentClientConfig?.logger,profile:D=e?.parentClientConfig?.profile,region:T,requestHandler:k=e?.parentClientConfig?.requestHandler,credentialProviderLogger:Pe,userAgentAppId:we=e?.parentClientConfig?.userAgentAppId}=e,Ae=await Ks(T,e?.parentClientConfig?.region,Pe,{}),ye=!Bs(k);o=new t({...e,userAgentAppId:we,profile:D,region:Ae,requestHandler:ye?k:void 0,logger:C})}const{Credentials:n,AssumedRoleUser:g}=await o.send(new Gs(a));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${a.RoleArn}`);const f=zs(g),h={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...f&&{accountId:f}};return f&&N(h,"RESOLVED_ACCOUNT_ID","T"),N(h,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),h}},Bs=e=>e?.metadata?.handlerProtocol==="h2",Vs=(e,t)=>t?class extends e{constructor(a){super(a);for(const n of t)this.middlewareStack.use(n)}}:e,to=(e={},t)=>qs(e,Vs(me,t));export{dt as $Command,Ns as AssumeRoleWithWebIdentity$,Gs as AssumeRoleWithWebIdentityCommand,Ds as AssumeRoleWithWebIdentityRequest$,ks as AssumeRoleWithWebIdentityResponse$,Cs as AssumedRoleUser$,Ts as Credentials$,$ as ExpiredTokenException,_s as ExpiredTokenException$,j as IDPCommunicationErrorException,Us as IDPCommunicationErrorException$,L as IDPRejectedClaimException,Ws as IDPRejectedClaimException$,M as InvalidIdentityTokenException,$s as InvalidIdentityTokenException$,F as MalformedPolicyDocumentException,Fs as MalformedPolicyDocumentException$,O as PackedPolicyTooLargeException,Os as PackedPolicyTooLargeException$,Hs as PolicyDescriptorType$,H as RegionDisabledException,Ls as RegionDisabledException$,me as STSClient,E as STSServiceException,Ms as STSServiceException$,Be as __Client,to as getDefaultRoleAssumerWithWebIdentity};

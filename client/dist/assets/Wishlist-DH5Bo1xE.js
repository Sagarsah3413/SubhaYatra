import{h as F,M as I,u as k,w as W,r as h,j as e,e as f,N as P,O as D,X as v,s as L,ax as R,a as _,F as M,b as A,g as U,aG as H,ai as O,d as z}from"./index-DQRB4LQk.js";const p="http://localhost:8000/api",b="demo_user_123",N={async getUserWishlist(t=b){try{const a=await fetch(`${p}/wishlist/${t}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Error fetching wishlist:",a),B()}},async addToWishlist(t,a=b){try{const s=await fetch(`${p}/wishlist/${a}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error adding to wishlist:",s),s}},async removeFromWishlist(t,a=b){try{const s=await fetch(`${p}/wishlist/${a}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error removing from wishlist:",s),s}},async isInWishlist(t,a=b){try{const s=await fetch(`${p}/wishlist/${a}/${t}/check`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return(await s.json()).in_wishlist}catch(s){return console.error("Error checking wishlist status:",s),!1}}},B=()=>(console.log("Using fallback wishlist data. Check your backend connection."),[{id:1,name:"Everest Base Camp Trek",category:"trekking",location:"Solukhumbu, Nepal",image:"https://images.unsplash.com/photo-1544735716-392fe2489ffa?w=800",rating:4.9,reviews:2847,duration:"14 days",difficulty:"Challenging",price:"$1,299",description:"Epic journey to the base of the world's highest mountain with stunning Himalayan views.",tags:"trekking, mountains, adventure",added_at:new Date().toISOString()},{id:2,name:"Annapurna Circuit",category:"trekking",location:"Annapurna Region, Nepal",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800",rating:4.8,reviews:1923,duration:"16 days",difficulty:"Moderate to Challenging",price:"$899",description:"Classic trek through diverse landscapes from subtropical to alpine zones.",tags:"trekking, circuit, mountains",added_at:new Date().toISOString()},{id:3,name:"Chitwan National Park Safari",category:"wildlife",location:"Chitwan, Nepal",image:"https://images.unsplash.com/photo-1564760055775-d63b17a55c44?w=800",rating:4.7,reviews:1456,duration:"3 days",difficulty:"Easy",price:"$299",description:"Wildlife adventure in Nepal's first national park with rhinos and tigers.",tags:"wildlife, safari, nature",added_at:new Date().toISOString()}]),V=()=>{const{theme:t}=F(),{showToast:a}=I(),s=k(),{user:o,isSignedIn:x}=W(),[c,m]=h.useState([]),[u,d]=h.useState([]),[n,$]=h.useState(""),[C,w]=h.useState(!0),[j,g]=h.useState(null);h.useEffect(()=>{(async()=>{if(!x||!o){w(!1);return}try{w(!0),g(null);const i=await N.getUserWishlist(o.id);console.log("Wishlist data loaded:",i),m(i),d(i)}catch(i){console.error("Failed to load wishlist:",i);const l="Failed to load wishlist. Please try again.";g(l),a("error",l)}finally{w(!1)}})()},[x,o]),h.useEffect(()=>{let r=c;n&&(r=r.filter(i=>i.name.toLowerCase().includes(n.toLowerCase())||i.location.toLowerCase().includes(n.toLowerCase())||i.description.toLowerCase().includes(n.toLowerCase()))),d(r)},[c,n]);const S=async r=>{if(!x||!o){a("error","Please sign in to manage your wishlist");return}try{await N.removeFromWishlist(r,o.id);const i=c.find(l=>l.id===r);m(l=>l.filter(y=>y.id!==r)),d(l=>l.filter(y=>y.id!==r)),a("wishlist",`Removed "${i?.name||"item"}" from wishlist`)}catch(i){console.error("Failed to remove from wishlist:",i);const l="Failed to remove item. Please try again.";g(l),a("error",l),setTimeout(()=>g(null),3e3)}},E=r=>{switch(r){case"trekking":return z;case"culture":return O;case"nature":return H;case"wildlife":return U;default:return v}},T=r=>r.includes("Easy")?"text-green-600 bg-green-100":r.includes("Moderate")?"text-yellow-600 bg-yellow-100":r.includes("Challenging")?"text-red-600 bg-red-100":"text-gray-600 bg-gray-100";return x?C?e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t==="dark"?"bg-slate-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-teal-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:`text-lg font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:"Loading your wishlist..."})]})}):j?e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t==="dark"?"bg-slate-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${t==="dark"?"bg-red-900/20":"bg-red-100"}`,children:e.jsx(P,{className:"text-2xl text-red-500"})}),e.jsx("p",{className:`text-lg font-medium mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:j}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300",children:"Try Again"})]})}):e.jsxs("div",{className:`min-h-screen ${t==="dark"?"bg-slate-900 text-white":"bg-gray-50 text-gray-900"}`,children:[e.jsxs("section",{className:"relative py-24 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:`absolute inset-0 ${t==="dark"?"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900":"bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900"}`}),e.jsx("div",{className:"absolute inset-0 bg-black/20"})]}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-6 text-center text-white",children:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 mb-6 border border-white/20",children:[e.jsx(f,{className:"text-red-400"}),e.jsx("span",{className:"font-semibold",children:"Your Travel Dreams"})]}),e.jsx("h1",{className:"text-5xl md:text-7xl font-black mb-6 leading-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-white via-cyan-200 to-emerald-300 bg-clip-text text-transparent",children:"My Wishlist"})}),e.jsx("p",{className:"text-xl md:text-2xl text-cyan-100 mb-4 max-w-4xl mx-auto leading-relaxed",children:"Save and organize your dream destinations for future adventures"}),e.jsxs("div",{className:"flex items-center justify-center gap-8 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"text-teal-400"}),e.jsxs("span",{children:[c.length," Saved Places"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"text-red-400"}),e.jsx("span",{children:"Personalized Collection"})]}),c.length>0&&c[0].added_at&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-blue-400"}),e.jsx("span",{children:"Real API Data"})]})]})]})})]}),e.jsx("section",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search your wishlist...",value:n,onChange:r=>$(r.target.value),className:`w-full px-6 py-4 rounded-2xl border-2 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-all duration-300 ${t==="dark"?"bg-slate-800 border-slate-700 text-white placeholder-slate-400":"bg-white border-gray-200 text-gray-900 placeholder-gray-500"}`}),e.jsx(L,{className:"absolute right-6 top-1/2 transform -translate-y-1/2 text-teal-500 text-lg"})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-6 pb-20",children:u.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 ${t==="dark"?"bg-slate-800":"bg-gray-100"}`,children:e.jsx(f,{className:"text-4xl text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:n?"No matches found":"Your wishlist is empty"}),e.jsx("p",{className:`text-lg mb-8 ${t==="dark"?"text-slate-400":"text-gray-600"}`,children:n?"Try adjusting your search":"Start exploring and save places you'd love to visit"}),e.jsx("button",{onClick:()=>s("/"),className:"bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white px-8 py-4 rounded-2xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Explore Destinations"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(r=>e.jsx(G,{item:r,theme:t,onRemove:()=>S(r.id),getCategoryIcon:E,getDifficultyColor:T},r.id))})})]}):e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t==="dark"?"bg-slate-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 ${t==="dark"?"bg-slate-800":"bg-gray-100"}`,children:e.jsx(f,{className:"text-4xl text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Sign In Required"}),e.jsx("p",{className:`text-lg mb-8 ${t==="dark"?"text-slate-400":"text-gray-600"}`,children:"Please sign in to view your wishlist"}),e.jsx("button",{onClick:()=>s("/sign-in"),className:"bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white px-8 py-4 rounded-2xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Sign In"})]})})},G=({item:t,theme:a,onRemove:s,getCategoryIcon:o,getDifficultyColor:x})=>{const c=o(t.category),m=k(),u=()=>{const d=t.type||t.category||"Place",n=t.name;m(`/details?type=${encodeURIComponent(d)}&name=${encodeURIComponent(n)}`)};return e.jsxs("div",{className:`group rounded-3xl border transition-all duration-500 hover:transform hover:-translate-y-2 ${a==="dark"?"bg-slate-800/50 border-slate-700 hover:border-slate-600":"bg-white border-gray-200 hover:border-gray-300"} shadow-lg hover:shadow-2xl overflow-hidden`,children:[e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",onError:d=>{d.target.src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-red-500/80 border border-red-400/40 text-white backdrop-blur-sm hover:bg-red-600/90 transition-all duration-300 flex items-center justify-center",children:e.jsx(R,{})})}),e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 border border-white/30",children:[e.jsx(c,{className:"text-white text-sm"}),e.jsx("span",{className:"text-white text-sm font-medium capitalize",children:t.category})]})}),e.jsx("div",{className:"absolute bottom-4 right-4",children:e.jsxs("div",{className:"flex items-center gap-1 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 border border-white/30",children:[e.jsx(_,{className:"text-yellow-400 text-sm"}),e.jsx("span",{className:"text-white text-sm font-bold",children:t.rating})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-teal-500 transition-colors duration-300",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(M,{className:"text-teal-500 text-sm"}),e.jsx("span",{className:`text-sm ${a==="dark"?"text-slate-400":"text-gray-600"}`,children:t.location})]}),e.jsx("p",{className:`text-sm mb-4 ${a==="dark"?"text-slate-400":"text-gray-600"}`,children:t.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-semibold ${x(t.difficulty)}`,children:t.difficulty}),e.jsx("span",{className:"text-sm font-medium",children:t.duration})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:`text-sm ${a==="dark"?"text-slate-400":"text-gray-600"}`,children:["(",t.reviews," reviews)"]})}),e.jsx("span",{className:"text-base font-semibold text-teal-500",children:t.price})]}),e.jsxs("button",{onClick:u,className:"w-full mt-4 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2",children:[e.jsx("span",{children:"View Details"}),e.jsx(A,{})]})]})]})};export{V as default};
